<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>RAU System & Vector Visualization — Full</title>

<!-- MathJax -->
<script>
window.MathJax = {
  tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
  svg: { fontCache: 'global' }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

<style>
  :root {
    --accent: #2196F3;
    --bg: #f0f0f0;
    --card: #ffffff;
    --muted: #888;
  }
  html,body { height:100%; margin:0; font-family: Arial, Helvetica, sans-serif; background:var(--bg); color:#222; }
  header {
    background:#333; color:white; padding:10px 16px; display:flex; align-items:center; justify-content:space-between;
  }
  header h1 { margin:0; font-size:18px; }
  .top-controls { display:flex; gap:2px; align-items:center; }
  .toggle-btn {
    background:var(--accent); color:white; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; font-weight:600;
  }
  .page {
    padding:16px;
  }

  section {
    overflow:hidden;
    max-height:0;
    opacity:0;
    transition: max-height 0.6s ease, opacity 0.6s ease, padding 0.3s ease;
  }
  section.active {
    max-height:2400px;
    opacity:1;
    padding:20px 16px 40px;
  }

  .card {
    background:var(--card);
    border-radius:10px;
    padding:18px;
    max-width:1000px;
    margin:0 auto;
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
  }

  #canvas1 { border:2px solid #333; border-radius:8px; background:white; display:block; margin:16px auto; }

  .desc { background:#e8f4f8; border-left:4px solid var(--accent); padding:12px; margin-top:12px; border-radius:6px; }
  .controls { margin-top:12px; text-align:center; }
  input[type=range] { width:320px; margin-top:8px; }

  .vector-grid {
    display:block;
    align-items:flex-start;
    margin-top:8px;
  }
  #canvas2 { border:2px solid #333; border-radius:8px; background:white; display:block; }
  .panel {
    width:62%;
    background:white;
    padding:5px;
    border-radius:8px;
    box-shadow:0 2px 8px rgba(0,0,0,0.06);
    font-size:16px;
  }
  .control-group { display:flex; align-items:center; gap:8px; margin:8px 0; }
  .control-group label { min-width:110px; font-weight:600; }
  .control-group input[type=range] { flex:1; }
  .value { width:56px; text-align:right; font-family:monospace; }

  pre#resultsContent { background:#f5f5f5; padding:10px; border-radius:6px; white-space:pre-wrap; font-family:monospace; font-size:13px; }

  #formulaPanel {
    position:fixed;
    right:8px;
    top:50px;
    width:30%;
    background:rgba(255,255,255,0.98);
    border:2px solid var(--accent);
    border-radius:10px;
    box-shadow:0 8px 24px rgba(0,0,0,0.12);
    transition: transform 0.45s cubic-bezier(.2,.9,.2,1), width 0.3s ease;
    z-index:1200;
    overflow:hidden;
    display:flex;
    flex-direction:column;
  }
  #formulaPanel.slim {
    width:64px;
    transform: translateX(0);
  }
  #formulaHeader {
    background:var(--accent);
    color:white;
    padding:8px 10px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    cursor:pointer;
  }
  #formulaHeader .title { font-weight:700; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  #formulaHeader .chev { font-size:16px; opacity:0.95; }
  #formulaBody { padding:2px 4px; font-size:13px; background:transparent; overflow-y:auto; max-height:600px; }
  #formulaPanel.slim #formulaBody { display:none; }
  #formulaPanel.slim #formulaHeader { justify-content:left; }

  @media (max-width:900px) {
    #formulaPanel { right:5px; top:32px; width:30%; }
    #formulaPanel.slim { width:2%; }
    .panel { width:30%; }
  }
  
  .conversion-panel {
    display: none;
    background:rgba(255,255,255,0.98);
    padding: 3px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    text-align: center;
  }
  
  #conversionCanvas {
    display: block;
    margin: auto;
  }

  #mathBlock {
    max-height: 500px; /* adjust to fit your content */
    overflow: hidden;
    transition: max-height 0.4s ease;
  }
  
  #mathBlock.collapsed {
    max-height: 0;
  }
</style>
</head>
<body>

<header>
  <h1>RAU Interactive Visualizations</h1>
  <div class="top-controls">
    <button id="toggleButton" class="toggle-btn">Switch to Vector Diagram</button>
  </div>
</header>
<script>
// Global Utilities
// ============================================
function changeFontSize(changeAmount, id_name) {
  let element = document.getElementById(id_name);
  if (element) {
    let currentSize = parseInt(element.style.fontSize) || 13;
    let newSize = currentSize + changeAmount;
    if (newSize < 8) newSize = 8;
    element.style.fontSize = newSize + 'px';
  }
}

function dragElement(elmnt) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  if (document.getElementById(elmnt.id + "header")) {
    document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
  } else {
    elmnt.onmousedown = dragMouseDown;
  }

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    document.onmousemove = elementDrag;
  }

  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    document.onmouseup = null;
    document.onmousemove = null;
  }

}
function toggleMathBlock() {
  const mathBlock = document.getElementById('mathBlock');
  if (mathBlock.classList.contains('collapsed')) {
    mathBlock.classList.remove('collapsed');
    mathBlock.style.maxHeight = mathBlock.scrollHeight + 'px';
  } else {
    mathBlock.style.maxHeight = '0';
    mathBlock.classList.add('collapsed');
  }
}
</script>
<!-- Floating Formula Panel -->
<div id="formulaPanel" aria-hidden="false">
  <div id="formulaHeader" title="Click and hold to move around">
    <div class="title">RAU information</div>
    <div class="chev" id="formulaChevron" title="Click to expand/collapse">◀</div>
  </div>
  <div id="formulaBody">
  <button onclick="toggleMathBlock()">Show/Hide Formulas</button>

    <div id="mathBlock" class="collapsed">
      <p style="margin:0 0 8px 0; font-weight:600;">For parameter \(0.0 < t < 1.0\):</p>
      <div>
        \[
        \mathrm{rsin}(t) \;=\; \frac{t}{\sqrt{\,1.0 - 2.0t + 2.0t^{2.0}\,}}
        \]
      </div>
      <div>
        \[
        \mathrm{rcos}(t) \;=\; \frac{1.0 - t}{\sqrt{\,1.0 - 2.0t + 2.0t^{2.0}\,}}
        \]
      </div>
      <div>
        \[
        \mathrm{rtan}(t) \;=\; \frac{t}{1.0 - t}
        \]
      </div>
    </div>
    
    <strong>Vector Information</strong>
    <button onclick="changeFontSize(2,'resultsContent')">+</button>
    <button onclick="changeFontSize(-2,'resultsContent')">-</button>
    <pre id="resultsContent" style="margin:0; font-family:monospace; font-size:13px; background:#fafafa; padding:8px; border-radius:6px;"></pre>
      
    <div class="control-group">
      <label>Conversion Reference</label>
      <input type="checkbox" id="showConversion">
    </div>
   
    <div id="conversionPanel" class="conversion-panel">
      <canvas id="conversionCanvas" width="280" height="220"></canvas>
    </div>
  </div>
</div>

<!-- Section 1: RAU Explanation -->
<section id="section1" class="inactive">
  <div class="card">
    <h2 style="margin-top:6px;">RAU — Explanation</h2>
    <div class="desc">
      <strong>Key insight:</strong> RAU maps a linear parameter (0.0–4.0) to circular motion by using rational functions on quadrant diagonals.
    </div>

    <canvas id="canvas1" width="420" height="420" style="display:block;margin:18px auto;"></canvas>

    <div class="controls" style="text-align:center;">
      <label style="font-weight:700;">t Parameter: <span id="paramValue">0.00</span></label><br>
      <input type="range" id="paramSlider" min="0" max="4" step="0.01" value="0" />
    </div>

    <div style="margin-top:12px; background:#f5f5f5; padding:10px; border-radius:8px;">
      More information @ https://www.youtube.com/watch?v=TJr4YfEgVuk
    </div>
  </div>
</section>

<!-- Section 2: Vector Diagram -->
<section id="section2" class="active">
  <div class="card">
    <h2 style="margin-top:6px;">Vector + RAU Angle Visualization</h2>

    <div class="vector-grid">
      <canvas id="canvas2" width="760" height="560"></canvas>

      <div class="panel">
        <div class="control-group">
          <label for="uLength">u length:</label>
          <input id="uLength" type="range" min="50" max="200" value="120">
          <div class="value" id="uLengthVal">120</div>
        </div>

        <div class="control-group">
          <label for="uAngle">u angle (°):</label>
          <input id="uAngle" type="range" min="0" max="360" value="30">
          <div class="value" id="uAngleVal">30°</div>
        </div>

        <div class="control-group">
          <label for="vLength">v length:</label>
          <input id="vLength" type="range" min="50" max="200" value="100">
          <div class="value" id="vLengthVal">100</div>
        </div>

        <div class="control-group">
          <label for="vAngle">v angle (°):</label>
          <input id="vAngle" type="range" min="0" max="360" value="0">
          <div class="value" id="vAngleVal">0°</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Load external JavaScript -->
<script src="rau-viz.js"></script>

</body>
</html>
