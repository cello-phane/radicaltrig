<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RAU Diagonal Quadrant Motion</title>
<style>
  body { background:#fff; font-family:monospace; text-align:center; margin:0; padding:1rem; }
  canvas { border:1px solid #ccc; border-radius:8px; background:#fff; }
  .controls { margin-top:0.5rem; }
</style>
</head>
<body>
<h2>RAU Parameter Diagonal Motion</h2>
<canvas id="rauCanvas" width="400" height="400"></canvas>
<div class="controls">
  <label>Phase (0–4): 
    <input type="range" id="phaseSlider" min="0" max="4" step="0.001" value="0">
  </label>
  <label><input type="checkbox" id="autoCheck"> Auto</label>
</div>

<script>
const canvas = document.getElementById('rauCanvas');
const ctx = canvas.getContext('2d');
const slider = document.getElementById('phaseSlider');
const autoCheck = document.getElementById('autoCheck');

let t = 0;
let last = 0;

// --- map RAU parameter t → (x,y) along diagonals ---
function rauToXY(t) {
  const q = Math.floor(t) % 4;
  const lt = t - q; // local parameter in [0,1)
  switch (q) {
    case 0: return { x: 1 - lt, y: lt };      // (1,0) → (0,1)
    case 1: return { x: -lt, y: 1 - lt };     // (0,1) → (-1,0)
    case 2: return { x: -1 + lt, y: -lt };    // (-1,0) → (0,-1)
    case 3: return { x: lt, y: -1 + lt };     // (0,-1) → (1,0)
  }
}

// --- draw the RAU quadrant grid ---
function drawGrid(cx, cy, r) {
  ctx.strokeStyle = "#ddd";
  ctx.lineWidth = 1;
  for (let i = -1; i <= 1; i++) {
    ctx.beginPath(); ctx.moveTo(cx + i*r, cy - r); ctx.lineTo(cx + i*r, cy + r); ctx.stroke();
    ctx.beginPath(); ctx.moveTo(cx - r, cy + i*r); ctx.lineTo(cx + r, cy + i*r); ctx.stroke();
  }
  ctx.strokeStyle = "#666";
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(cx - r, cy); ctx.lineTo(cx + r, cy);
  ctx.moveTo(cx, cy - r); ctx.lineTo(cx, cy + r);
  ctx.stroke();
}

// --- main draw ---
function drawRAU(t) {
  const W = canvas.width, H = canvas.height;
  const cx = W/2, cy = H/2;
  const r = 120;
  ctx.clearRect(0,0,W,H);
  drawGrid(cx, cy, r);

  // draw all four quadrant diagonals faintly
  const quads = [
    [[1,0],[0,1],"#5cc0ff"],
    [[0,1],[-1,0],"#ffb35c"],
    [[-1,0],[0,-1],"#d28aff"],
    [[0,-1],[1,0],"#68e186"]
  ];
  for (const [[x1,y1],[x2,y2],color] of quads) {
    ctx.strokeStyle = color;
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(cx + r*x1, cy - r*y1);
    ctx.lineTo(cx + r*x2, cy - r*y2);
    ctx.stroke();
  }

  // point position
  const p = rauToXY(t);
  const x = cx + p.x * r;
  const y = cy - p.y * r;

  // point
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(x, y, 6, 0, 2*Math.PI);
  ctx.fill();

  // label
  ctx.fillStyle = "#222";
  ctx.font = "14px monospace";
  ctx.fillText(`RAU phase = ${t.toFixed(3)}`, 20, 25);
  ctx.fillText(`Quadrant = ${Math.floor(t)%4}`, 20, 45);
  ctx.fillText(`(x,y)=(${p.x.toFixed(3)}, ${p.y.toFixed(3)})`, 20, 65);
}

function animate(ts) {
  if (last === 0) last = ts;
  const dt = (ts - last)/1000;
  last = ts;
  if (autoCheck.checked) {
    t += dt * 0.5;
    if (t >= 4) t = 0;
    slider.value = t;
  }
  drawRAU(t);
  requestAnimationFrame(animate);
}

slider.addEventListener('input', ()=>{ t = parseFloat(slider.value); drawRAU(t); });

drawRAU(0);
requestAnimationFrame(animate);
</script>
</body>
</html>
