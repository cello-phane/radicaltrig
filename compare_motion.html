<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Radian vs RAU Rotation Demo</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #fff;
    color: #222;
    text-align: center;
    margin: 0;
    padding: 20px;
  }
  h2 { margin: 8px 0; }
  .container {
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-top: 20px;
  }
  canvas {
    border: 1px solid #ccc;
    border-radius: 8px;
    background: #fff;
  }
  .controls {
    margin-top: 20px;
  }
  .controls label {
    margin: 0 10px;
  }
</style>
</head>
<body>

<h1>Uniform (Radian) vs Non-Uniform (RAU) Rotation</h1>
<div class="container">
  <div>
    <h2>Radian</h2>
    <canvas id="radianCanvas" width="300" height="300"></canvas>
  </div>
  <div>
    <h2>RAU</h2>
    <canvas id="rauCanvas" width="300" height="300"></canvas>
  </div>
</div>

<div class="controls">
  <label>Phase:
    <input type="range" id="phaseSlider" min="0" max="1" step="0.001" value="0">
  </label>
  <label><input type="checkbox" id="autoCheck"> Auto Rotate</label>
  <label>Speed:
    <input type="range" id="speedSlider" min="0.1" max="2" step="0.1" value="1">
  </label>
  <label><input type="checkbox" id="labelCheck" checked> Show Labels</label>
  <label><input type="checkbox" id="trailCheck" checked> Show Trail</label>
</div>

<script>
const radianCanvas = document.getElementById("radianCanvas");
const rauCanvas = document.getElementById("rauCanvas");
const rctx = radianCanvas.getContext("2d");
const ractx = rauCanvas.getContext("2d");
const slider = document.getElementById("phaseSlider");
const autoCheck = document.getElementById("autoCheck");
const speedSlider = document.getElementById("speedSlider");
const labelCheck = document.getElementById("labelCheck");
const trailCheck = document.getElementById("trailCheck");

let t = 0;
let lastTime = 0;

function drawCircle(ctx, theta, showLabels, showTrail) {
  const W = ctx.canvas.width;
  const H = ctx.canvas.height;
  const cx = W / 2, cy = H / 2, radius = 100;

  // Trail fade
  if (showTrail) {
    ctx.fillStyle = "rgba(255,255,255,0.1)";
    ctx.fillRect(0, 0, W, H);
  } else {
    ctx.clearRect(0, 0, W, H);
  }

  // grid
  ctx.strokeStyle = "#eee";
  for (let i = -2; i <= 2; i++) {
    ctx.beginPath();
    ctx.moveTo(0, cy + i * 50);
    ctx.lineTo(W, cy + i * 50);
    ctx.moveTo(cx + i * 50, 0);
    ctx.lineTo(cx + i * 50, H);
    ctx.stroke();
  }

  // circle
  ctx.strokeStyle = "#555";
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.arc(cx, cy, radius, 0, 2 * Math.PI);
  ctx.stroke();

  // marker dot
  const x = cx + radius * Math.cos(theta);
  const y = cy + radius * Math.sin(theta);
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(x, y, 6, 0, 2 * Math.PI);
  ctx.fill();

  // labels if enabled
  if (showLabels) {
    ctx.fillStyle = "#000";
    ctx.font = "12px monospace";
    const keyAngles = [0, 30, 45, 60, 90, 120, 150, 180, 270];
    keyAngles.forEach(a => {
      const rad = a * Math.PI / 180;
      const lx = cx + (radius + 18) * Math.cos(rad);
      const ly = cy + (radius + 18) * Math.sin(rad);
      ctx.fillText(a.toString(), lx - 10, ly + 4);
    });
  }
}

// RAU â†’ radian mapping
function rauFromTeta(t) {
  const eps = 1e-6;
  t = Math.min(Math.max(t, 0), Math.PI/2 - eps);
  const s = Math.sin(t);
  const c = Math.cos(t);
  return s / (s + c);
}
  
function render() {
  const thetaRad = -(t * 2 * Math.PI);
  const thetaRau = rauToTheta(-t);

  drawCircle(rctx, thetaRad, labelCheck.checked, trailCheck.checked);
  drawCircle(ractx, thetaRau, labelCheck.checked, trailCheck.checked);
}

function animate(timestamp) {
  if (lastTime === 0) lastTime = timestamp;
  const dt = (timestamp - lastTime) / 1000;
  lastTime = timestamp;

  if (autoCheck.checked) {
    const speed = parseFloat(speedSlider.value);
    t += dt * 0.1 * speed;
    t %= 1;
    slider.value = t;
  }

  render();
  requestAnimationFrame(animate);
}

slider.addEventListener("input", () => {
  t = parseFloat(slider.value);
  render();
});

render();
requestAnimationFrame(animate);
</script>
</body>
</html>
