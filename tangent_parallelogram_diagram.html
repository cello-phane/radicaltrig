<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tangent via Parallelogram</title>
    <style>
    	container {
    		width: 100%;
    		overflow: auto;
    	}
        body {
            margin: 0;
            padding: 20px;
            background: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        
        canvas {
            display: block;
            margin: 20px auto;
            border: 2px solid #333;
            background: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .controls {
 			float: right;
            max-width: 800px;
            margin-left: 10px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .control-group {
            display: flex;
            align-items: center;
            margin: 10px 0;
            gap: 10px;
        }
        
        label {
            min-width: 120px;
            font-weight: bold;
        }
        
        input[type="range"] {
            flex: 1;
            margin: 0 10px;
        }
        
        .value {
            min-width: 60px;
            text-align: right;
            font-family: monospace;
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
        }
        
        .formula {
            background: #e8f4f8;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid #2196F3;
            border-radius: 4px;
        }
        
        .math {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            margin: 5px 0;
        }
        
        .explanation {
            background: #fff3cd;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
        }
		.frac { 
        	display:inline-block; text-align:center; vertical-align:middle; font-family:serif; 
        }
        .frac .num {
        	display:block; padding:0 0.4em;
       	}
        .frac .den {
        	display:block; padding:0 0.4em; border-top:1px solid;
       	}
    </style>
</head>
<body>
	<div id="containter">
    <div class="controls">
        <h2>Tangent of Angle Between Vectors via Parallelogram</h2>
        
        <div class="control-group">
            <label>Vector u length:</label>
            <input type="range" id="uLength" min="50" max="200" value="120">
            <span class="value" id="uLengthVal">120</span>
        </div>
        
        <div class="control-group">
            <label>Vector u angle:</label>
            <input type="range" id="uAngle" min="0" max="360" value="30">
            <span class="value" id="uAngleVal">30¬∞</span>
        </div>
        
        <div class="control-group">
            <label>Vector v length:</label>
            <input type="range" id="vLength" min="50" max="200" value="100">
            <span class="value" id="vLengthVal">100</span>
        </div>
        
        <div class="control-group">
            <label>Vector v angle:</label>
            <input type="range" id="vAngle" min="0" max="360" value="80">
            <span class="value" id="vAngleVal">80¬∞</span>
        </div>
        
        <div class="formula">
	        <div class="math"> <ul> Cross Product [u √ó v]</ul>
	        <strong>u √ó v = ‚à£u‚à£‚à£v‚à£sin(Œ∏)n = <span id="crossProduct">0</span></strong> is the area of the parallelogram times the unit vector n _|_ to uv.
	        It's zero when u and v are parallel, and maximum when they‚Äôre perpendicular.
	        </div>
	        
	        <div class="math"> <ul> Dot Product [u ¬∑ v]</ul>
	        <strong>u ¬∑ v = ‚à£u‚à£‚à£v‚à£cos‚Å°ùúÉ  &nbsp;&nbsp; = &nbsp;<span id="dotProduct">0</span></strong> equals the length of u‚Äôs projection on v, times |v|.
	        It measures how much they point in the same direction.
	        </div>
	        <div class="math"><strong>Tan(Œ∏) = |u √ó v| / (u ¬∑ v) = <span id="tangentValue">0</span></strong></div>
	        <div class="math">Angle Œ∏ = <span id="angleValue">0¬∞</span></div>
        </div>
        
        <div class="explanation">
            <h3>Parallelogram Interpretation:</h3>
            <p>
            <span class="frac">
              <span class="num">|u √ó v|</span>
              <span class="den">u ¬∑ v</span>
            </span>
            &nbsp;=&nbsp;
            <span class="frac">
              <span class="num">|u| |v| sinŒ∏</span>
              <span class="den">|u| |v| cosŒ∏</span>
            </span>
            &nbsp;=&nbsp;tanŒ∏
			</p>
            <p><strong>Tangent Ratio:</strong> tan(Œ∏) = Area / (projection factor) gives the tangent of the angle between vectors.</p>
            <p><strong>Height vs Base:</strong> The parallelogram's area divided by the "base projection" gives the tangent relationship.</p>
        </div>
    </div>

    <canvas id="canvas" width="800" height="600"></canvas>
	</div>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        
        // Control elements
        const controls = {
            uLength: document.getElementById('uLength'),
            uAngle: document.getElementById('uAngle'),
            vLength: document.getElementById('vLength'),
            vAngle: document.getElementById('vAngle')
        };
        
        const displays = {
            uLengthVal: document.getElementById('uLengthVal'),
            uAngleVal: document.getElementById('uAngleVal'),
            vLengthVal: document.getElementById('vLengthVal'),
            vAngleVal: document.getElementById('vAngleVal'),
            crossProduct: document.getElementById('crossProduct'),
            dotProduct: document.getElementById('dotProduct'),
            tangentValue: document.getElementById('tangentValue'),
            angleValue: document.getElementById('angleValue')
        };
        
        function degToRad(deg) {
            return deg * Math.PI / 180;
        }
        
        function radToDeg(rad) {
            return rad * 180 / Math.PI;
        }
        
        function drawArrow(ctx, fromX, fromY, toX, toY, color, width = 2) {
            const headLength = 12;
            const dx = toX - fromX;
            const dy = toY - fromY;
            const angle = Math.atan2(dy, dx);
            
            // Draw line
            ctx.strokeStyle = color;
            ctx.lineWidth = width;
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();
            
            // Draw arrowhead
            ctx.beginPath();
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLength * Math.cos(angle - Math.PI/6), toY - headLength * Math.sin(angle - Math.PI/6));
            ctx.moveTo(toX, toY);
            ctx.lineTo(toX - headLength * Math.cos(angle + Math.PI/6), toY - headLength * Math.sin(angle + Math.PI/6));
            ctx.stroke();
        }
        
        function drawDashedLine(ctx, fromX, fromY, toX, toY, color, dashLength = 5) {
            ctx.strokeStyle = color;
            ctx.lineWidth = 1;
            ctx.setLineDash([dashLength, dashLength]);
            ctx.beginPath();
            ctx.moveTo(fromX, fromY);
            ctx.lineTo(toX, toY);
            ctx.stroke();
            ctx.setLineDash([]);
        }
        
        function drawText(ctx, text, x, y, color = 'black', font = '14px Arial') {
            ctx.fillStyle = color;
            ctx.font = font;
            ctx.fillText(text, x, y);
        }
        
        function render() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Get control values
            const uLength = parseInt(controls.uLength.value);
            const uAngleDeg = parseInt(controls.uAngle.value);
            const vLength = parseInt(controls.vLength.value);
            const vAngleDeg = parseInt(controls.vAngle.value);
            
            // Update displays
            displays.uLengthVal.textContent = uLength;
            displays.uAngleVal.textContent = uAngleDeg + '¬∞';
            displays.vLengthVal.textContent = vLength;
            displays.vAngleVal.textContent = vAngleDeg + '¬∞';
            
            // Convert to radians
            const uAngle = degToRad(uAngleDeg);
            const vAngle = degToRad(vAngleDeg);
            
            // Calculate vector components
            const u = {
                x: uLength * Math.cos(uAngle),
                y: -uLength * Math.sin(uAngle) // Negative because canvas Y is flipped
            };
            
            const v = {
                x: vLength * Math.cos(vAngle),
                y: -vLength * Math.sin(vAngle)
            };
            
            // Vector endpoints
            const uEnd = { x: centerX + u.x, y: centerY + u.y };
            const vEnd = { x: centerX + v.x, y: centerY + v.y };
            
            // Parallelogram fourth point
            const paraPoint = { x: centerX + u.x + v.x, y: centerY + u.y + v.y };
            
            // Draw coordinate grid
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 1;
            for (let i = -400; i <= 400; i += 50) {
                ctx.beginPath();
                ctx.moveTo(centerX + i, 0);
                ctx.lineTo(centerX + i, canvas.height);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(0, centerY + i);
                ctx.lineTo(canvas.width, centerY + i);
                ctx.stroke();
            }
            
            // Draw main axes
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(canvas.width, centerY);
            ctx.stroke();
            
            ctx.beginPath();
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, canvas.height);
            ctx.stroke();
            
            // Draw parallelogram
            ctx.strokeStyle = '#ddd';
            ctx.fillStyle = 'rgba(100, 150, 255, 0.1)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(uEnd.x, uEnd.y);
            ctx.lineTo(paraPoint.x, paraPoint.y);
            ctx.lineTo(vEnd.x, vEnd.y);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Draw vectors
            drawArrow(ctx, centerX, centerY, uEnd.x, uEnd.y, '#ff4444', 3);
            drawArrow(ctx, centerX, centerY, vEnd.x, vEnd.y, '#4444ff', 3);
            
            // Draw parallelogram completion vectors (dashed)
            drawDashedLine(ctx, uEnd.x, uEnd.y, paraPoint.x, paraPoint.y, '#4444ff');
            drawDashedLine(ctx, vEnd.x, vEnd.y, paraPoint.x, paraPoint.y, '#ff4444');
            
            // Draw height line (perpendicular from u to v-direction)
            const vUnit = { x: v.x / vLength, y: v.y / vLength };
            const projectionLength = u.x * vUnit.x + u.y * vUnit.y;
            const projectionEnd = {
                x: centerX + projectionLength * vUnit.x,
                y: centerY + projectionLength * vUnit.y
            };
            
            drawDashedLine(ctx, uEnd.x, uEnd.y, projectionEnd.x, projectionEnd.y, '#00aa00');
            ctx.fillStyle = '#00aa00';
            ctx.beginPath();
            ctx.arc(projectionEnd.x, projectionEnd.y, 4, 0, 2 * Math.PI);
            ctx.fill();
            
            // Labels
            drawText(ctx, 'u', uEnd.x + 10, uEnd.y - 10, '#ff4444', 'bold 16px Arial');
            drawText(ctx, 'v', vEnd.x + 10, vEnd.y - 10, '#4444ff', 'bold 16px Arial');
            drawText(ctx, 'height', (uEnd.x + projectionEnd.x)/2 - 20, (uEnd.y + projectionEnd.y)/2, '#00aa00', '12px Arial');
            
            // Calculate cross and dot products
            const crossProd = Math.abs(u.x * v.y - u.y * v.x);
            const dotProd = u.x * v.x + u.y * v.y;
            const tangent = dotProd !== 0 ? crossProd / dotProd : Infinity;
            const angleBetween = Math.atan2(crossProd, dotProd);
            
            // Update formula displays
            displays.crossProduct.textContent = crossProd.toFixed(2);
            displays.dotProduct.textContent = dotProd.toFixed(2);
            displays.tangentValue.textContent = isFinite(tangent) ? tangent.toFixed(4) : '‚àû';
            displays.angleValue.textContent = radToDeg(angleBetween).toFixed(1) + '¬∞';
            
            // Draw angle arc
            const arcRadius = 40;
            const startAngle = Math.min(uAngle, vAngle);
            const endAngle = Math.max(uAngle, vAngle);
            
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(centerX, centerY, arcRadius, -endAngle, -startAngle);
            ctx.stroke();
            
            // Angle label
            const midAngle = (startAngle + endAngle) / 2;
            const labelX = centerX + (arcRadius + 15) * Math.cos(midAngle);
            const labelY = centerY - (arcRadius + 15) * Math.sin(midAngle);
            drawText(ctx, 'Œ∏', labelX, labelY, '#666', 'bold 14px Arial');
        }
        
        // Event listeners
        Object.values(controls).forEach(control => {
            control.addEventListener('input', render);
        });
        
        // Initial render
        render();
    </script>
</body>
</html>
